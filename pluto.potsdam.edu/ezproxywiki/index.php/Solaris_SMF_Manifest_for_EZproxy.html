<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Solaris SMF Manifest for EZproxy - EZProxyWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.0rc5" />
<link rel="shortcut icon" href="https://pluto.potsdam.edu/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://pluto.potsdam.edu/ezproxywiki/opensearch_desc.php" title="EZProxyWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://pluto.potsdam.edu/ezproxywiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="EZProxyWiki Atom feed" href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*.css" />
<!--[if IE 6]><link rel="stylesheet" href="/ezproxywiki/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/ezproxywiki/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: ezpwikidb:resourceloader:filter:minify-css:7:bd176711d87effdb3a6ff09c19734297 */</style>

<script src="../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Solaris_SMF_Manifest_for_EZproxy","wgTitle":"Solaris SMF Manifest for EZproxy","wgCurRevisionId":2318,"wgArticleId":1387,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Code","Documentation"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Solaris_SMF_Manifest_for_EZproxy","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: ezpwikidb:resourceloader:filter:minify-js:7:a02a7fa766593347c4dbb130a7c3803e */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Solaris_SMF_Manifest_for_EZproxy skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Solaris SMF Manifest for EZproxy</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From EZProxyWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="Solaris_SMF_Manifest_for_EZproxy.html#column-one">navigation</a>, <a href="Solaris_SMF_Manifest_for_EZproxy.html#searchInput">search</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Solaris_Service_Management_Facility"><span class="tocnumber">1</span> <span class="toctext">Solaris Service Management Facility</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Create_the_SMF_service"><span class="tocnumber">2</span> <span class="toctext">Create the SMF service</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Service_configuration_files"><span class="tocnumber">2.1</span> <span class="toctext">Service configuration files</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Importing_the_service_into_SMF"><span class="tocnumber">2.2</span> <span class="toctext">Importing the service into SMF</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Starting_the_new_service"><span class="tocnumber">2.3</span> <span class="toctext">Starting the new service</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Solaris_SMF_Manifest_for_EZproxy.html#The_manifest_file_.28ezproxy.xml.29"><span class="tocnumber">2.4</span> <span class="toctext">The manifest file (ezproxy.xml)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Further_reading"><span class="tocnumber">3</span> <span class="toctext">Further reading</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Sun_documentation"><span class="tocnumber">3.1</span> <span class="toctext">Sun documentation</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Man_pages"><span class="tocnumber">3.2</span> <span class="toctext">Man pages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="Solaris_SMF_Manifest_for_EZproxy.html#Author"><span class="tocnumber">4</span> <span class="toctext">Author</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Solaris_Service_Management_Facility">Solaris Service Management Facility</span></h2>
<p>Starting with <a rel="nofollow" class="external text" href="http://www.sun.com/software/solaris/">Solaris 10</a>, system services are controlled by the Service Management Facility. This facility simplifies management and control of non-interactive services such as EZproxy. Institutions running EZproxy on Solaris 10 may wish to have EZproxy controlled by SMF. 
</p><p>This article will not tell you all you need to know about Solaris 10's Service Management Facility. It is intended only as a guide for getting started in implementing an SMF manifest for EZproxy. You can read more about SMF by following links in the <a href="Solaris_SMF_Manifest_for_EZproxy.html#Further_reading">further reading</a> section.
</p><p>These instructions have only been tested on a non-production server and you should do your own tests before running live with this.
</p>
<h2> <span class="mw-headline" id="Create_the_SMF_service">Create the SMF service</span></h2>
<h3> <span class="mw-headline" id="Service_configuration_files">Service configuration files</span></h3>
<p>Copy the <a href="Solaris_SMF_Manifest_for_EZproxy.html#The_manifest_file_.28ezproxy.xml.29"> manifest file</a> for EZproxy to the site-specific manifest location:
</p>
<pre>
# mkdir -p /var/svc/manifest/site/application
# cp ezproxy.xml /var/svc/manifest/site/application/ezproxy.xml
</pre>
<p>Create a symbolic link to your EZproxy program file for use by SMF when starting, stopping or restarting the EZproxy process:
</p>
<pre>
# ln -s /your/ezproxy/binary /lib/svc/method/ezproxy
</pre> 
<p>The manifest file provided on this page depends on the existence of this symbolic link.
</p>
<h3> <span class="mw-headline" id="Importing_the_service_into_SMF">Importing the service into SMF</span></h3>
<p>Once you have the manifest file in place, and the symbolic link created, you can import the manifest into the service configuration repository.
</p><p>Firstly, use svccfg to validate the manifest file before importing:
</p>
<pre>
# svccfg validate /var/svc/manifest/site/application/ezproxy.xml
</pre>
<p>Be sure to fix any errors reported by svccfg.
</p><p>Next, import the service configuration into the repository:
</p>
<pre>
# svccfg import /var/svc/manifest/site/application/ezproxy.xml
</pre>
<p>Check that the manifest was imported successfully:
</p>
<pre>
#svcs ezproxy
STATE          STIME    FMRI
disabled       12:10:37 svc:/site/application/ezproxy:default
</pre>
<p>Or if you prefer more detail, you can run svcs verbosely:
</p>
<pre>
# svcs -vx ezproxy
svc:/site/application/ezproxy:default (EZproxy server)
 State: disabled since Fri Apr 21 12:10:37 2006
Reason: Disabled by an administrator.
   See: http://sun.com/msg/SMF-8000-05
Impact: This service is not running.
</pre>
<h3> <span class="mw-headline" id="Starting_the_new_service">Starting the new service</span></h3>
<p>You can now start the SMF-controlled EZproxy process:
</p>
<pre>
# svcadm enable ezproxy
</pre>
<p>If all goes well, running svcs you will see:
</p>
<pre>
# svcs -vx ezproxy
svc:/site/application/EZproxy:default (ezproxy server)
 State: online since Fri Apr 21 12:11:57 2006
   See: /var/svc/log/site-application-ezproxy:default.log
Impact: None.
</pre>
<p><i>To Do:</i> Explain what happens if all does <b>not</b> go well&#160;;)
</p>
<h3> <span class="mw-headline" id="The_manifest_file_.28ezproxy.xml.29">The manifest file (ezproxy.xml)</span></h3>
<p>This is the ezproxy.xml manifest file that you can copy and use on your Solaris 10 server:
</p>
<pre>

&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE service_bundle SYSTEM &quot;/usr/share/lib/xml/dtd/service_bundle.dtd.1&quot;&gt;
&lt;!--
	Copyright 2006 RMIT University Library, All rights reserved.

	Solaris service manifest for EZproxy

	EZproxy.xml&#160;: Ben Couldrey, ben.couldrey [at] rmit.edu.au

	Note, you should do a few things before this manifest will work:

		1. Choose an appropriate FMRI, I've chosen the site-specifc location
		2. Create a symbolic link in /lib/svc/method pointing to your EZproxy binary
			(ln -s /your/ezproxy/binary /lib/svc/method/ezproxy)
		3. Add, change or delete the instance dependencies as necessary for your system
		4. Test, test, test.
--&gt;

&lt;service_bundle type='manifest' name='ezproxy'&gt;
&lt;service
	name='site/application/ezproxy'
	type='service'
	version='1'&gt;

	&lt;single_instance /&gt;

	&lt;instance name='default' enabled='false'&gt;
		&lt;dependency name='loopback'
			grouping='require_all'
			restart_on='error'
			type='service'&gt;
			&lt;service_fmri value='svc:/network/loopback:default'/&gt;
		&lt;/dependency&gt;

		&lt;dependency name='physical'
			grouping='optional_all'
			restart_on='error'
			type='service'&gt;
			&lt;service_fmri value='svc:/network/physical:default'/&gt;
		&lt;/dependency&gt;

		&lt;exec_method
			type='method'
			name='start'
			exec='/lib/svc/method/ezproxy start'
			timeout_seconds='60' /&gt;

		&lt;exec_method
			type='method'
			name='stop'
			exec='/lib/svc/method/ezproxy stop'
			timeout_seconds='60' /&gt;

		&lt;exec_method
			type='method'
			name='restart'
			exec='/lib/svc/method/ezproxy restart'
			timeout_seconds='60' /&gt;
	&lt;/instance&gt;

	&lt;stability value='Evolving' /&gt;

	&lt;template&gt;
		&lt;common_name&gt;
			&lt;loctext xml:lang='C'&gt;
				EZproxy server
			&lt;/loctext&gt;
		&lt;/common_name&gt;
		&lt;documentation&gt;
			&lt;doc_link name='usefulutilities.com'
				uri='http://www.usefulutilities.com' /&gt;
		&lt;/documentation&gt;
	&lt;/template&gt;

&lt;/service&gt;
&lt;/service_bundle&gt;

</pre>
<h2> <span class="mw-headline" id="Further_reading">Further reading</span></h2>
<h3> <span class="mw-headline" id="Sun_documentation">Sun documentation</span></h3>
<p><a rel="nofollow" class="external text" href="http://www.sun.com/bigadmin/content/selfheal/smf-quickstart.html">Solaris Service Management Facility - Quickstart Guide</a><br />
<a rel="nofollow" class="external text" href="http://www.sun.com/bigadmin/content/selfheal/sdev_intro.html">Solaris Service Management Facility - Service Developer Introduction</a><br />
<a rel="nofollow" class="external text" href="http://forum.sun.com/forum.jspa?forumID=241">BigAdmin Predictive Self-Healing Discussion Forum</a>
</p>
<h3> <span class="mw-headline" id="Man_pages">Man pages</span></h3>
<p>Check the manual pages of the utilities referenced on this page:
</p>
<ul><li> smf(5)
</li><li> svcs(1)
</li><li> svcadm(1M)
</li><li> svccfg(1M)
</li></ul>
<h2> <span class="mw-headline" id="Author">Author</span></h2>
<p>Ben Couldrey, Library Systems Officer, <a rel="nofollow" class="external text" href="http://www.rmit.edu.au/library/">RMIT University Library</a><br />
Submitted by: <a href="User:Bcouldrey.html" title="User:Bcouldrey">Ben</a> 04:29, 21 April 2006 (EDT)
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 120/1000000
Preprocessor generated node count: 224/1000000
Postâ€expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key ezpwikidb:pcache:idhash:1387-0!*!0!!en!*!* and timestamp 20150624200627 -->
</div><div class="printfooter">
Retrieved from "<a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;oldid=2318">https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;oldid=2318</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Code.html" title="Category:Code">Code</a></li><li><a href="Category:Documentation.html" title="Category:Documentation">Documentation</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="Solaris_SMF_Manifest_for_EZproxy.html" primary="1" context="subject" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Talk:Solaris_SMF_Manifest_for_EZproxy&amp;action=edit&amp;redlink=1" primary="1" context="talk" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;action=edit" primary="1" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-createaccount"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:UserLogin&amp;returnto=Solaris+SMF+Manifest+for+EZproxy&amp;type=signup">Create account</a></li>
				<li id="pt-login"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:UserLogin&amp;returnto=Solaris+SMF+Manifest+for+EZproxy" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="Main_Page.html" style="background-image: url(https://pluto.potsdam.edu/var/www/html/common/dot_trans.gif);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="EZProxyWiki:Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="EZProxyWiki:Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help:Contents.html" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="https://pluto.potsdam.edu/ezproxywiki/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" title="Search EZProxyWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Toolbox</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/Solaris_SMF_Manifest_for_EZproxy.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/Solaris_SMF_Manifest_for_EZproxy.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;oldid=2318" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Solaris_SMF_Manifest_for_EZproxy&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<div id="f-poweredbyico">
		<a href="https://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 26 May 2009, at 08:07.</li>
		<li id="viewcount">This page has been accessed 18,203 times.</li>
		<li id="privacy"><a href="EZProxyWiki:Privacy_policy.html" title="EZProxyWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="EZProxyWiki:About.html" title="EZProxyWiki:About">About EZProxyWiki</a></li>
		<li id="disclaimer"><a href="EZProxyWiki:General_disclaimer.html" title="EZProxyWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.221 secs. --></body></html>