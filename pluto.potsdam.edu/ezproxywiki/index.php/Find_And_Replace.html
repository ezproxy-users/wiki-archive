<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Find And Replace - EZProxyWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.0rc5" />
<link rel="shortcut icon" href="https://pluto.potsdam.edu/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://pluto.potsdam.edu/ezproxywiki/opensearch_desc.php" title="EZProxyWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://pluto.potsdam.edu/ezproxywiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="EZProxyWiki Atom feed" href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*.css" />
<!--[if IE 6]><link rel="stylesheet" href="/ezproxywiki/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/ezproxywiki/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: ezpwikidb:resourceloader:filter:minify-css:7:bd176711d87effdb3a6ff09c19734297 */</style>

<script src="../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Find_And_Replace","wgTitle":"Find And Replace","wgCurRevisionId":4914,"wgArticleId":1370,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Documentation"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Find_And_Replace","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: ezpwikidb:resourceloader:filter:minify-js:7:a02a7fa766593347c4dbb130a7c3803e */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Find_And_Replace skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Find And Replace</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From EZProxyWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="Find_And_Replace.html#column-one">navigation</a>, <a href="Find_And_Replace.html#searchInput">search</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><ul><li> Originally submitted by <a rel="nofollow" class="external text" href="mailto:ben_noeske@harvard.edu">Ben Noeske</a>, Harvard University Library, on June 13, 2003. Later updated by wiki editors.
</li></ul>
<p>The Find and Replace functionality was (I think) first introduced in the beta version dated 15 June 2001. The following information is based on testing I did with version 2.0h. The functionality was enhanced in version 5.0a, 31 March 2008.
</p><p>This functionality allows you to instruct EZproxy to replace all occurrences of one arbitrary string in a given resource with another arbitrary string. It is commonly used to fix occurrences of native host/domain names that are not normally rewritten by EZproxy but need to be. Another common use is to change JavaScript that may be otherwise incompatible with EZproxy. It can also be used simply to change the wording on the user interfaces of resources – as done with OvidSP in <a rel="nofollow" class="external text" href="http://distlib.blogs.com/distlib/2008/01/ezproxy-find-an.html">this example</a>.
</p><p>See also the official OCLC <a rel="nofollow" class="external text" href="http://www.oclc.org/us/en/support/documentation/ezproxy/cfg/find/">Find page</a>.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Find_And_Replace.html#Basic_usage"><span class="tocnumber">1</span> <span class="toctext">Basic usage</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Find_And_Replace.html#Multiple_Find_and_Replace_lines"><span class="tocnumber">2</span> <span class="toctext">Multiple Find and Replace lines</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Find_And_Replace.html#Multiple_matches"><span class="tocnumber">3</span> <span class="toctext">Multiple matches</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Find_And_Replace.html#Find_and_Replace_occurs_before_proxying"><span class="tocnumber">4</span> <span class="toctext">Find and Replace occurs before proxying</span></a></li>
</ul>
</td></tr></table>
<h3> <span class="mw-headline" id="Basic_usage">Basic usage</span></h3>
<p>The Find and Replace lines are placed after the host/domain lists in a resource entry in the ezproxy.cfg file.
</p><p>The Find line specifies the text to be replaced. The text on this line must match exactly the text in the page being proxied. That means the same number of spaces, the same use of case, etc. I do not believe there is anything like a wildcard matching operator or any other fancy pattern matching stuff.
</p><p>Use the Replace line to specify the text that replaces the text on the Find line. The Replace line can take advantage of several special operators. More operators are listed at the official OCLC <a rel="nofollow" class="external text" href="http://www.oclc.org/us/en/support/documentation/ezproxy/cfg/find/">Find page</a>.
</p>
<ul><li> ^H – inserts the proxy server's hostname (e.g. ezpserver.university.edu) in this position.
</li><li> ^D – inserts the proxy server's domain (e.g. university.edu) in this position.
</li><li> ^L – inserts the proxy server's domain with a leading period (e.g. .university.edu).
</li><li> ^Psome_host_ezproxy_knows^ – placing ^P and ^ around some_host_ezproxy_knows will cause proxying to be applied to some_host_ezproxy_knows and the resultant string to be inserted. This is useful for making things like plain-text URLs (non-hyperlinked web addresses) in the body of a web page look like EZproxy links that wouldn't otherwise be transformed by EZproxy (i.e. they don't appear as a link in an HREF tag or don't have a leading "http://" in the text of the page). For example:
</li></ul>
<pre>
T some db
U http://www.somedb.com
DJ somedb.com
Find &#104;&#116;&#116;&#112;&#58;&#47;&#47;www.somedb.com
Replace &#104;&#116;&#116;&#112;&#58;&#47;&#47;^pwww.somedb.com^
</pre>
<p>Without this Find/Replace, EZproxy would leave the plain-text (non-hyperlinked) &#104;&#116;&#116;&#112;&#58;&#47;&#47;www.somedb.com untouched (it would look like http://www.somedb.com in your browser, and you might wonder why it wasn't proxied until you saw the underlying HTML). With the Find/Replace, EZproxy would make it look proxied (i.e. replacing www.somedb.com with something like 80-www.somedb.com.ezpserver.university.edu).
</p><p>Note: the some_host_ezproxy_knows doesn't have to belong to this same entry in the configuration file. In this example it could've actually been www.someotherdb.com in the Find/Replace lines, as long as there was an entry somewhere in the cfg file that applied to www.someotherdb.com. It's not likely that there would be such a situation where you would really want to do that.
</p><p>Look through the recommended database configurations at <a rel="nofollow" class="external free" href="http://www.oclc.org/us/en/support/documentation/ezproxy/db/">http://www.oclc.org/us/en/support/documentation/ezproxy/db/</a> to see examples of these in use. Or, if you have a test version of EZproxy available, go ahead and play with them.
</p><p>I don't know what the limits are for the lengths of strings in the Find/Replace lines. I've been able to use strings over a hundred characters long in a Find line without problem.
</p>
<h3> <span class="mw-headline" id="Multiple_Find_and_Replace_lines">Multiple Find and Replace lines</span></h3>
<p>Multiple Find and Replace lines can be included in each database configuration entry in the ezproxy.cfg file. Each Find/Replace pair will be applied to all pages that match that entry.
</p><p>Note: Find/Replace does not cascade. If you have the following:
</p>
<pre>
Find x-string
Replace y-string
Find y-string
Replace z-string
</pre>
<p>x-string would be replaced with y-string, but that y-string would not then be replaced with z-string. Of course, any y-string in the original page would be replaced with z-string.
</p>
<h3> <span class="mw-headline" id="Multiple_matches">Multiple matches</span></h3>
<p>If there are two database entries that match a given page, the Find/Replace lines from the entry that comes first in the cfg file will be applied. Thus if a Find/Replace is not happening when you expect it to, you should check your config file for an earlier entry that matches the page you are looking at.
</p>
<pre>
Example:

T some db
U http://www.somedb.com
D somedb.com
Find &#104;&#116;&#116;&#112;&#58;&#47;&#47;www.somedb.com
Replace &#104;&#116;&#116;&#112;&#58;&#47;&#47;^pwww.somedb.com^

T some related db
U http://srdb.somedb.com
H srdb.somedb.com
# the following Find/Replace won't ever take place because all pages
# for this resource will actually be processed by the above entry for some db.
Find 'somedb.com'
Replace '^d'
</pre>
<h3> <span class="mw-headline" id="Find_and_Replace_occurs_before_proxying">Find and Replace occurs before proxying</span></h3>
<p>If you were to cause a host in an HREF tag to be replaced with a host that is described by an entry somewhere in the ezproxy.cfg file, the string replacement will happen first and then that link will be transformed into its proxied form. Again, situations where you would want to do this are rare. I'm just including it for completeness of documentation.
</p><p>Find/Replace can be a powerful tool, but it is also somewhat fragile because minor cosmetic changes by the resource vendor (the addition of an extra space, capitalizing something, etc.) that normally make no functional difference can cause a Find/Replace line to stop working. And like any extra processing you ask EZproxy to do, Find/Replace lines will create more load on your server. Of course, this probably won't be an issue unless you egregiously overuse the functionality, but it's something to keep way in the back of your mind.
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 51/1000000
Preprocessor generated node count: 100/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key ezpwikidb:pcache:idhash:1370-0!*!*!!en!*!* and timestamp 20150624085229 -->
</div><div class="printfooter">
Retrieved from "<a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;oldid=4914">https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;oldid=4914</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category:Documentation.html" title="Category:Documentation">Documentation</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="Find_And_Replace.html" primary="1" context="subject" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Talk:Find_And_Replace&amp;action=edit&amp;redlink=1" primary="1" context="talk" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;action=edit" primary="1" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-createaccount"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:UserLogin&amp;returnto=Find+And+Replace&amp;type=signup">Create account</a></li>
				<li id="pt-login"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Special:UserLogin&amp;returnto=Find+And+Replace" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="Main_Page.html" style="background-image: url(https://pluto.potsdam.edu/var/www/html/common/dot_trans.gif);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="EZProxyWiki:Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="EZProxyWiki:Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help:Contents.html" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="https://pluto.potsdam.edu/ezproxywiki/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" title="Search EZProxyWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Toolbox</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/Find_And_Replace.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/Find_And_Replace.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;oldid=4914" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="https://pluto.potsdam.edu/ezproxywiki/index.php?title=Find_And_Replace&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<div id="f-poweredbyico">
		<a href="https://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 5 February 2014, at 18:24.</li>
		<li id="viewcount">This page has been accessed 15,693 times.</li>
		<li id="privacy"><a href="EZProxyWiki:Privacy_policy.html" title="EZProxyWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="EZProxyWiki:About.html" title="EZProxyWiki:About">About EZProxyWiki</a></li>
		<li id="disclaimer"><a href="EZProxyWiki:General_disclaimer.html" title="EZProxyWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.158 secs. --></body></html>